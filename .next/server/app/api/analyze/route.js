"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:os");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:tty":
/*!***************************!*\
  !*** external "node:tty" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:tty");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_sixer_gemini_antigravity_scratch_since_this_call_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze/route.ts */ \"(rsc)/./src/app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"/home/sixer/.gemini/antigravity/scratch/since-this-call/src/app/api/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _home_sixer_gemini_antigravity_scratch_since_this_call_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGc2l4ZXIlMkYuZ2VtaW5pJTJGYW50aWdyYXZpdHklMkZzY3JhdGNoJTJGc2luY2UtdGhpcy1jYWxsJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGc2l4ZXIlMkYuZ2VtaW5pJTJGYW50aWdyYXZpdHklMkZzY3JhdGNoJTJGc2luY2UtdGhpcy1jYWxsJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvQztBQUNqSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbmNlLXRoaXMtY2FsbC8/ZjFiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9zaXhlci8uZ2VtaW5pL2FudGlncmF2aXR5L3NjcmF0Y2gvc2luY2UtdGhpcy1jYWxsL3NyYy9hcHAvYXBpL2FuYWx5emUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FuYWx5emUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXplXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXplL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2hvbWUvc2l4ZXIvLmdlbWluaS9hbnRpZ3Jhdml0eS9zY3JhdGNoL3NpbmNlLXRoaXMtY2FsbC9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hbmFseXplL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/analyze/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var react_tweet_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-tweet/api */ \"(rsc)/./node_modules/react-tweet/dist/api/get-tweet.js\");\n/* harmony import */ var _lib_ai_extractor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai-extractor */ \"(rsc)/./src/lib/ai-extractor.ts\");\n/* harmony import */ var _lib_market_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/market-data */ \"(rsc)/./src/lib/market-data.ts\");\n/* harmony import */ var _lib_rate_limit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/rate-limit */ \"(rsc)/./src/lib/rate-limit.ts\");\n\n\n\n\n\n// Rate Limiter: 5 requests per minute per IP\nconst limiter = (0,_lib_rate_limit__WEBPACK_IMPORTED_MODULE_3__.rateLimit)({\n    interval: 60 * 1000,\n    uniqueTokenPerInterval: 500\n});\nasync function GET(request) {\n    // Basic IP-based rate limiting\n    // In Vercel/Next.js, 'x-forwarded-for' is usually the best bet.\n    const ip = request.headers.get(\"x-forwarded-for\") || \"127.0.0.1\";\n    // Check Limit (5 req / min) -- Strict to prevent bill parabolics\n    const isAllowed = limiter.check(5, ip);\n    if (!isAllowed) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Rate Limit Exceeded. Please wait a minute.\"\n        }, {\n            status: 429\n        });\n    }\n    const { searchParams } = new URL(request.url);\n    const tweetUrl = searchParams.get(\"url\");\n    if (!tweetUrl) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Missing tweet URL\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        // 1. Extract Tweet ID\n        const tweetId = tweetUrl.split(\"/\").pop()?.split(\"?\")[0];\n        if (!tweetId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid tweet URL\"\n            }, {\n                status: 400\n            });\n        }\n        // 2. Fetch Tweet Content\n        const tweet = await (0,react_tweet_api__WEBPACK_IMPORTED_MODULE_4__.getTweet)(tweetId);\n        if (!tweet) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Tweet not found\"\n            }, {\n                status: 404\n            });\n        }\n        // 3. AI Extraction\n        // We use tweet.created_at (which is usually ISO string)\n        // Note: react-tweet returns created_at as a string\n        const callData = await (0,_lib_ai_extractor__WEBPACK_IMPORTED_MODULE_1__.extractCallFromText)(tweet.text, tweet.created_at);\n        if (!callData) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Could not identify financial call\"\n            }, {\n                status: 422\n            });\n        }\n        // 4. Market Data Fetch\n        // Historical Price\n        const callDate = new Date(callData.date);\n        const callPrice = await (0,_lib_market_data__WEBPACK_IMPORTED_MODULE_2__.getPrice)(callData.symbol, callData.type, callDate);\n        // Current Price\n        const currentPrice = await (0,_lib_market_data__WEBPACK_IMPORTED_MODULE_2__.getPrice)(callData.symbol, callData.type);\n        if (callPrice === null || currentPrice === null) {\n            const isStock = callData.type === \"STOCK\";\n            const msg = isStock ? \"Stock data is currently unavailable (API Blocked). Please try Crypto!\" : \"Market data not found for this asset.\";\n            return Response.json({\n                error: msg,\n                details: {\n                    callData,\n                    callPrice,\n                    currentPrice\n                }\n            }, {\n                status: 422\n            });\n        }\n        // 5. Calculate Performance\n        const performance = (0,_lib_market_data__WEBPACK_IMPORTED_MODULE_2__.calculatePerformance)(callPrice, currentPrice);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            analysis: callData,\n            market: {\n                callPrice,\n                currentPrice,\n                performance,\n                currency: \"USD\"\n            },\n            tweet: {\n                id: tweet.id_str,\n                text: tweet.text,\n                author: tweet.user.name,\n                username: tweet.user.screen_name,\n                date: tweet.created_at\n            }\n        });\n    } catch (error) {\n        console.error(\"Analysis error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal Server Error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUluQixNQUFNb0IsTUFBTTtnQkFDaEJsQixNQUFNRixNQUFNRSxJQUFJO2dCQUNoQm1CLFFBQVFyQixNQUFNc0IsSUFBSSxDQUFDQyxJQUFJO2dCQUN2QkMsVUFBVXhCLE1BQU1zQixJQUFJLENBQUNHLFdBQVc7Z0JBQ2hDbkIsTUFBTU4sTUFBTUcsVUFBVTtZQUMxQjtRQUNKO0lBRUosRUFBRSxPQUFPWixPQUFPO1FBQ1ptQyxRQUFRbkMsS0FBSyxDQUFDLG1CQUFtQkE7UUFDakMsT0FBT2pCLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0IsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDL0U7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbmNlLXRoaXMtY2FsbC8uL3NyYy9hcHAvYXBpL2FuYWx5emUvcm91dGUudHM/MDdkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0VHdlZXQgfSBmcm9tICdyZWFjdC10d2VldC9hcGknO1xuaW1wb3J0IHsgZXh0cmFjdENhbGxGcm9tVGV4dCB9IGZyb20gJ0AvbGliL2FpLWV4dHJhY3Rvcic7XG5pbXBvcnQgeyBnZXRQcmljZSwgY2FsY3VsYXRlUGVyZm9ybWFuY2UgfSBmcm9tICdAL2xpYi9tYXJrZXQtZGF0YSc7XG5pbXBvcnQgeyByYXRlTGltaXQgfSBmcm9tICdAL2xpYi9yYXRlLWxpbWl0JztcblxuLy8gUmF0ZSBMaW1pdGVyOiA1IHJlcXVlc3RzIHBlciBtaW51dGUgcGVyIElQXG5jb25zdCBsaW1pdGVyID0gcmF0ZUxpbWl0KHtcbiAgICBpbnRlcnZhbDogNjAgKiAxMDAwLCAvLyA2MCBzZWNvbmRzXG4gICAgdW5pcXVlVG9rZW5QZXJJbnRlcnZhbDogNTAwLCAvLyBNYXggNTAwIHVzZXJzIHBlciBzZWNvbmQgdW5pcXVlIElQIHRyYWNraW5nXG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAgIC8vIEJhc2ljIElQLWJhc2VkIHJhdGUgbGltaXRpbmdcbiAgICAvLyBJbiBWZXJjZWwvTmV4dC5qcywgJ3gtZm9yd2FyZGVkLWZvcicgaXMgdXN1YWxseSB0aGUgYmVzdCBiZXQuXG4gICAgY29uc3QgaXAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSB8fCAnMTI3LjAuMC4xJztcblxuICAgIC8vIENoZWNrIExpbWl0ICg1IHJlcSAvIG1pbikgLS0gU3RyaWN0IHRvIHByZXZlbnQgYmlsbCBwYXJhYm9saWNzXG4gICAgY29uc3QgaXNBbGxvd2VkID0gbGltaXRlci5jaGVjayg1LCBpcCk7XG5cbiAgICBpZiAoIWlzQWxsb3dlZCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IGVycm9yOiAnUmF0ZSBMaW1pdCBFeGNlZWRlZC4gUGxlYXNlIHdhaXQgYSBtaW51dGUuJyB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQyOSB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHR3ZWV0VXJsID0gc2VhcmNoUGFyYW1zLmdldCgndXJsJyk7XG5cbiAgICBpZiAoIXR3ZWV0VXJsKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTWlzc2luZyB0d2VldCBVUkwnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gMS4gRXh0cmFjdCBUd2VldCBJRFxuICAgICAgICBjb25zdCB0d2VldElkID0gdHdlZXRVcmwuc3BsaXQoJy8nKS5wb3AoKT8uc3BsaXQoJz8nKVswXTtcbiAgICAgICAgaWYgKCF0d2VldElkKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdHdlZXQgVVJMJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMi4gRmV0Y2ggVHdlZXQgQ29udGVudFxuICAgICAgICBjb25zdCB0d2VldCA9IGF3YWl0IGdldFR3ZWV0KHR3ZWV0SWQpO1xuICAgICAgICBpZiAoIXR3ZWV0KSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1R3ZWV0IG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDMuIEFJIEV4dHJhY3Rpb25cbiAgICAgICAgLy8gV2UgdXNlIHR3ZWV0LmNyZWF0ZWRfYXQgKHdoaWNoIGlzIHVzdWFsbHkgSVNPIHN0cmluZylcbiAgICAgICAgLy8gTm90ZTogcmVhY3QtdHdlZXQgcmV0dXJucyBjcmVhdGVkX2F0IGFzIGEgc3RyaW5nXG4gICAgICAgIGNvbnN0IGNhbGxEYXRhID0gYXdhaXQgZXh0cmFjdENhbGxGcm9tVGV4dCh0d2VldC50ZXh0LCB0d2VldC5jcmVhdGVkX2F0KTtcblxuICAgICAgICBpZiAoIWNhbGxEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0NvdWxkIG5vdCBpZGVudGlmeSBmaW5hbmNpYWwgY2FsbCcgfSwgeyBzdGF0dXM6IDQyMiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDQuIE1hcmtldCBEYXRhIEZldGNoXG4gICAgICAgIC8vIEhpc3RvcmljYWwgUHJpY2VcbiAgICAgICAgY29uc3QgY2FsbERhdGUgPSBuZXcgRGF0ZShjYWxsRGF0YS5kYXRlKTtcbiAgICAgICAgY29uc3QgY2FsbFByaWNlID0gYXdhaXQgZ2V0UHJpY2UoY2FsbERhdGEuc3ltYm9sLCBjYWxsRGF0YS50eXBlLCBjYWxsRGF0ZSk7XG5cbiAgICAgICAgLy8gQ3VycmVudCBQcmljZVxuICAgICAgICBjb25zdCBjdXJyZW50UHJpY2UgPSBhd2FpdCBnZXRQcmljZShjYWxsRGF0YS5zeW1ib2wsIGNhbGxEYXRhLnR5cGUpO1xuXG4gICAgICAgIGlmIChjYWxsUHJpY2UgPT09IG51bGwgfHwgY3VycmVudFByaWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBpc1N0b2NrID0gY2FsbERhdGEudHlwZSA9PT0gJ1NUT0NLJztcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGlzU3RvY2tcbiAgICAgICAgICAgICAgICA/IFwiU3RvY2sgZGF0YSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUgKEFQSSBCbG9ja2VkKS4gUGxlYXNlIHRyeSBDcnlwdG8hXCJcbiAgICAgICAgICAgICAgICA6IFwiTWFya2V0IGRhdGEgbm90IGZvdW5kIGZvciB0aGlzIGFzc2V0LlwiO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBtc2csXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgY2FsbERhdGEsIGNhbGxQcmljZSwgY3VycmVudFByaWNlIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MjIgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUuIENhbGN1bGF0ZSBQZXJmb3JtYW5jZVxuICAgICAgICBjb25zdCBwZXJmb3JtYW5jZSA9IGNhbGN1bGF0ZVBlcmZvcm1hbmNlKGNhbGxQcmljZSwgY3VycmVudFByaWNlKTtcblxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgYW5hbHlzaXM6IGNhbGxEYXRhLFxuICAgICAgICAgICAgbWFya2V0OiB7XG4gICAgICAgICAgICAgICAgY2FsbFByaWNlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZSxcbiAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogJ1VTRCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0d2VldDoge1xuICAgICAgICAgICAgICAgIGlkOiB0d2VldC5pZF9zdHIsXG4gICAgICAgICAgICAgICAgdGV4dDogdHdlZXQudGV4dCxcbiAgICAgICAgICAgICAgICBhdXRob3I6IHR3ZWV0LnVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdHdlZXQudXNlci5zY3JlZW5fbmFtZSxcbiAgICAgICAgICAgICAgICBkYXRlOiB0d2VldC5jcmVhdGVkX2F0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQW5hbHlzaXMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0VHdlZXQiLCJleHRyYWN0Q2FsbEZyb21UZXh0IiwiZ2V0UHJpY2UiLCJjYWxjdWxhdGVQZXJmb3JtYW5jZSIsInJhdGVMaW1pdCIsImxpbWl0ZXIiLCJpbnRlcnZhbCIsInVuaXF1ZVRva2VuUGVySW50ZXJ2YWwiLCJHRVQiLCJyZXF1ZXN0IiwiaXAiLCJoZWFkZXJzIiwiZ2V0IiwiaXNBbGxvd2VkIiwiY2hlY2siLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJ0d2VldFVybCIsInR3ZWV0SWQiLCJzcGxpdCIsInBvcCIsInR3ZWV0IiwiY2FsbERhdGEiLCJ0ZXh0IiwiY3JlYXRlZF9hdCIsImNhbGxEYXRlIiwiRGF0ZSIsImRhdGUiLCJjYWxsUHJpY2UiLCJzeW1ib2wiLCJ0eXBlIiwiY3VycmVudFByaWNlIiwiaXNTdG9jayIsIm1zZyIsIlJlc3BvbnNlIiwiZGV0YWlscyIsInBlcmZvcm1hbmNlIiwiYW5hbHlzaXMiLCJtYXJrZXQiLCJjdXJyZW5jeSIsImlkIiwiaWRfc3RyIiwiYXV0aG9yIiwidXNlciIsIm5hbWUiLCJ1c2VybmFtZSIsInNjcmVlbl9uYW1lIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai-extractor.ts":
/*!*********************************!*\
  !*** ./src/lib/ai-extractor.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CallSchema: () => (/* binding */ CallSchema),\n/* harmony export */   extractCallFromText: () => (/* binding */ extractCallFromText)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/google */ \"(rsc)/./node_modules/@ai-sdk/google/dist/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\nconst CallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    symbol: zod__WEBPACK_IMPORTED_MODULE_0__.string().describe(\"The stock ticker or crypto symbol (e.g. BTC, NVDA, ETH).\"),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"CRYPTO\",\n        \"STOCK\"\n    ]).describe(\"The type of asset.\"),\n    sentiment: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"BULLISH\",\n        \"BEARISH\"\n    ]).describe(\"The sentiment of the call.\"),\n    date: zod__WEBPACK_IMPORTED_MODULE_0__.string().describe(\"The date of the tweet/call in ISO format (YYYY-MM-DD).\")\n});\n// Basic Regex Extraction Fallback if AI fails (Rate Limited)\n// This serves as a critical safety net to keep the app functional during AI outages.\nfunction extractWithRegex(text, dateStr) {\n    console.log(\"[AI-Extractor] Attempting Regex Fallback...\");\n    // 1. Find Ticker/Symbol\n    // Look for $BTC, $ETH, $AAPL or common names like \"Bitcoin\", \"Apple\"\n    const cashtagRegex = /\\$([A-Za-z]{2,6})/g;\n    const matches = [\n        ...text.matchAll(cashtagRegex)\n    ];\n    let symbol = \"\";\n    if (matches.length > 0) {\n        symbol = matches[0][1].toUpperCase();\n    } else {\n        // Simple keyword matching for major assets\n        const lower = text.toLowerCase();\n        if (lower.includes(\"bitcoin\") || lower.includes(\"btc\")) symbol = \"BTC\";\n        else if (lower.includes(\"ethereum\") || lower.includes(\"eth\")) symbol = \"ETH\";\n        else if (lower.includes(\"solana\") || lower.includes(\"sol\")) symbol = \"SOL\";\n        else if (lower.includes(\"tesla\") || lower.includes(\"tsla\")) symbol = \"TSLA\";\n        else if (lower.includes(\"apple\") || lower.includes(\"aapl\")) symbol = \"AAPL\";\n        else if (lower.includes(\"nvidia\") || lower.includes(\"nvda\")) symbol = \"NVDA\";\n        else if (lower.includes(\"silver\") || lower.includes(\"slv\")) symbol = \"SLV\";\n        else if (lower.includes(\"gold\") || lower.includes(\"gld\")) symbol = \"GLD\";\n    }\n    if (!symbol) {\n        console.warn(\"[AI-Extractor] Regex failed to find symbol\");\n        return null;\n    }\n    // 2. Determine Type\n    // Naive classification based on known crypto tickers. Default is STOCK.\n    let type = \"STOCK\";\n    const cryptoList = [\n        \"BTC\",\n        \"ETH\",\n        \"SOL\",\n        \"DOGE\",\n        \"DOT\",\n        \"ADA\",\n        \"XRP\",\n        \"LINK\",\n        \"AVAX\",\n        \"MATIC\",\n        \"PEPE\",\n        \"WOJAK\",\n        \"SHIB\",\n        \"BONK\",\n        \"WIF\",\n        \"FLOKI\",\n        \"BRETT\",\n        \"MOG\",\n        \"TURBO\"\n    ];\n    if (cryptoList.includes(symbol)) {\n        type = \"CRYPTO\";\n    }\n    // 3. Determine Sentiment\n    // Simple score-based keyword matching.\n    let sentiment = \"BULLISH\"; // Default assumption\n    const lowerText = text.toLowerCase();\n    // Expanded list of bearish terms to catch nuances like \"short\", \"crash\", \"puts\"\n    const bearishTerms = [\n        \"sell\",\n        \"dump\",\n        \"crash\",\n        \"short\",\n        \"bear\",\n        \"down\",\n        \"worth 0\",\n        \"zero\",\n        \"dead\",\n        \"falling\",\n        \"underperforming\",\n        \"puts\",\n        \"overvalued\",\n        \"late\",\n        \"top\",\n        \"exit\",\n        \"\\uD83D\\uDCA9\",\n        \"shit\",\n        \"scam\",\n        \"rug\",\n        \"bagholder\"\n    ];\n    const bullishTerms = [\n        \"buy\",\n        \"long\",\n        \"bull\",\n        \"moon\",\n        \"pump\",\n        \"high\",\n        \"rocket\",\n        \"parabolic\",\n        \"gem\",\n        \"next 100x\"\n    ];\n    let bullScore = 0;\n    let bearScore = 0;\n    const countOccurrences = (target, term)=>{\n        return target.split(term).length - 1;\n    };\n    bullishTerms.forEach((t)=>{\n        bullScore += countOccurrences(lowerText, t);\n    });\n    bearishTerms.forEach((t)=>{\n        bearScore += countOccurrences(lowerText, t);\n    });\n    if (bearScore > bullScore) sentiment = \"BEARISH\";\n    // Special case for Taleb's famous \"worth 0\" tweet or similar definitive statements\n    if (text.includes(\"worth 0\")) sentiment = \"BEARISH\";\n    return {\n        symbol,\n        type,\n        sentiment,\n        date: dateStr // Use tweet date\n    };\n}\n/**\n * Main Extraction Function.\n * Tries Google Gemini Flash 2.0 first.\n * If Rate Limited (429) or fails, falls back to Regex extraction.\n */ async function extractCallFromText(tweetText, tweetDate) {\n    try {\n        const { object } = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.generateObject)({\n            model: (0,_ai_sdk_google__WEBPACK_IMPORTED_MODULE_2__.google)(\"models/gemini-2.0-flash-exp\"),\n            schema: CallSchema,\n            prompt: `\n        Analyze this tweet and extract the financial \"Call\" (Prediction).\n        Tweet Content: \"${tweetText}\"\n        Tweet Date: \"${tweetDate}\"\n\n        Rules:\n        1. Identify the Main Asset. Use these symbol mappings:\n           - **PRECIOUS METALS** (ALWAYS type=\"STOCK\"):\n             - Silver, XAG, $SILVER -> symbol=\"SLV\"\n             - Gold, XAU, $GOLD -> symbol=\"GLD\"\n           - **CRYPTO** (type=\"CRYPTO\"): BTC, ETH, SOL, DOGE, XRP, etc.\n           - **STOCKS** (type=\"STOCK\"): AAPL, NVDA, TSLA, etc.\n        2. Determine Sentiment. Strict Rules:\n           - **CRITICAL**: If the author is mocking \"late buyers\", \"the crowd\", \"retail\", or \"calls them poop/shit\", this is a TOP SIGNAL -> **BEARISH**.\n           - **TIE-BREAKER**: If the tweet contains BOTH bullish words (like \"generational\", \"parabolic\") AND mocking of buyers, the MOCKING takes precedence. Mark as **BEARISH**.\n           - \"Parabolic\" is Bullish ONLY if the author is participating.\n           - Simple \"Buying\", \"Long\", \"Moon\", \"Send it\" = BULLISH.\n        3. Use the Tweet Date as the Date.\n        4. Normalize Symbol to the mappings above.\n      `\n        });\n        return object;\n    } catch (error) {\n        console.error(\"AI Extraction Failed:\", error);\n        // Fallback to regex if AI fails (e.g. 429 Rate Limit)\n        return extractWithRegex(tweetText, tweetDate);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ0QsTUFBTWQsTUFBTSxHQUFHO0lBQ3ZDO0lBRUFTLGFBQWFPLE9BQU8sQ0FBQ0MsQ0FBQUE7UUFBT1AsYUFBYUUsaUJBQWlCTCxXQUFXVTtJQUFJO0lBQ3pFVCxhQUFhUSxPQUFPLENBQUNDLENBQUFBO1FBQU9OLGFBQWFDLGlCQUFpQkwsV0FBV1U7SUFBSTtJQUV6RSxJQUFJTixZQUFZRCxXQUFXcEIsWUFBWTtJQUV2QyxtRkFBbUY7SUFDbkYsSUFBSUcsS0FBS1csUUFBUSxDQUFDLFlBQVlkLFlBQVk7SUFFMUMsT0FBTztRQUNITDtRQUNBRztRQUNBRTtRQUNBQyxNQUFNRyxRQUFRLGlCQUFpQjtJQUNuQztBQUNKO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWV3QixvQkFBb0JDLFNBQWlCLEVBQUVDLFNBQWlCO0lBQzFFLElBQUk7UUFDQSxNQUFNLEVBQUVwQyxNQUFNLEVBQUUsR0FBRyxNQUFNSCxrREFBY0EsQ0FBQztZQUNwQ3dDLE9BQU96QyxzREFBTUEsQ0FBQztZQUNkMEMsUUFBUXZDO1lBQ1J3QyxRQUFRLENBQUM7O3dCQUVHLEVBQUVKLFVBQVU7cUJBQ2YsRUFBRUMsVUFBVTs7Ozs7Ozs7Ozs7Ozs7OztNQWdCM0IsQ0FBQztRQUNDO1FBRUEsT0FBT3BDO0lBQ1gsRUFBRSxPQUFPd0MsT0FBTztRQUNaN0IsUUFBUTZCLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLHNEQUFzRDtRQUN0RCxPQUFPaEMsaUJBQWlCMkIsV0FBV0M7SUFDdkM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbmNlLXRoaXMtY2FsbC8uL3NyYy9saWIvYWktZXh0cmFjdG9yLnRzP2FjMTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ29vZ2xlIH0gZnJvbSAnQGFpLXNkay9nb29nbGUnO1xuaW1wb3J0IHsgZ2VuZXJhdGVPYmplY3QgfSBmcm9tICdhaSc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuZXhwb3J0IGNvbnN0IENhbGxTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgc3ltYm9sOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgc3RvY2sgdGlja2VyIG9yIGNyeXB0byBzeW1ib2wgKGUuZy4gQlRDLCBOVkRBLCBFVEgpLicpLFxuICAgIHR5cGU6IHouZW51bShbJ0NSWVBUTycsICdTVE9DSyddKS5kZXNjcmliZSgnVGhlIHR5cGUgb2YgYXNzZXQuJyksXG4gICAgc2VudGltZW50OiB6LmVudW0oWydCVUxMSVNIJywgJ0JFQVJJU0gnXSkuZGVzY3JpYmUoJ1RoZSBzZW50aW1lbnQgb2YgdGhlIGNhbGwuJyksXG4gICAgZGF0ZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIGRhdGUgb2YgdGhlIHR3ZWV0L2NhbGwgaW4gSVNPIGZvcm1hdCAoWVlZWS1NTS1ERCkuJyksXG59KTtcblxuZXhwb3J0IHR5cGUgQ2FsbERhdGEgPSB6LmluZmVyPHR5cGVvZiBDYWxsU2NoZW1hPjtcblxuXG4vLyBCYXNpYyBSZWdleCBFeHRyYWN0aW9uIEZhbGxiYWNrIGlmIEFJIGZhaWxzIChSYXRlIExpbWl0ZWQpXG4vLyBUaGlzIHNlcnZlcyBhcyBhIGNyaXRpY2FsIHNhZmV0eSBuZXQgdG8ga2VlcCB0aGUgYXBwIGZ1bmN0aW9uYWwgZHVyaW5nIEFJIG91dGFnZXMuXG5mdW5jdGlvbiBleHRyYWN0V2l0aFJlZ2V4KHRleHQ6IHN0cmluZywgZGF0ZVN0cjogc3RyaW5nKTogQ2FsbERhdGEgfCBudWxsIHtcbiAgICBjb25zb2xlLmxvZygnW0FJLUV4dHJhY3Rvcl0gQXR0ZW1wdGluZyBSZWdleCBGYWxsYmFjay4uLicpO1xuXG4gICAgLy8gMS4gRmluZCBUaWNrZXIvU3ltYm9sXG4gICAgLy8gTG9vayBmb3IgJEJUQywgJEVUSCwgJEFBUEwgb3IgY29tbW9uIG5hbWVzIGxpa2UgXCJCaXRjb2luXCIsIFwiQXBwbGVcIlxuICAgIGNvbnN0IGNhc2h0YWdSZWdleCA9IC9cXCQoW0EtWmEtel17Miw2fSkvZztcbiAgICBjb25zdCBtYXRjaGVzID0gWy4uLnRleHQubWF0Y2hBbGwoY2FzaHRhZ1JlZ2V4KV07XG5cbiAgICBsZXQgc3ltYm9sID0gJyc7XG4gICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBzeW1ib2wgPSBtYXRjaGVzWzBdWzFdLnRvVXBwZXJDYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2ltcGxlIGtleXdvcmQgbWF0Y2hpbmcgZm9yIG1ham9yIGFzc2V0c1xuICAgICAgICBjb25zdCBsb3dlciA9IHRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdiaXRjb2luJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2J0YycpKSBzeW1ib2wgPSAnQlRDJztcbiAgICAgICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ2V0aGVyZXVtJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2V0aCcpKSBzeW1ib2wgPSAnRVRIJztcbiAgICAgICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ3NvbGFuYScpIHx8IGxvd2VyLmluY2x1ZGVzKCdzb2wnKSkgc3ltYm9sID0gJ1NPTCc7XG4gICAgICAgIGVsc2UgaWYgKGxvd2VyLmluY2x1ZGVzKCd0ZXNsYScpIHx8IGxvd2VyLmluY2x1ZGVzKCd0c2xhJykpIHN5bWJvbCA9ICdUU0xBJztcbiAgICAgICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ2FwcGxlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2FhcGwnKSkgc3ltYm9sID0gJ0FBUEwnO1xuICAgICAgICBlbHNlIGlmIChsb3dlci5pbmNsdWRlcygnbnZpZGlhJykgfHwgbG93ZXIuaW5jbHVkZXMoJ252ZGEnKSkgc3ltYm9sID0gJ05WREEnO1xuICAgICAgICBlbHNlIGlmIChsb3dlci5pbmNsdWRlcygnc2lsdmVyJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3NsdicpKSBzeW1ib2wgPSAnU0xWJztcbiAgICAgICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ2dvbGQnKSB8fCBsb3dlci5pbmNsdWRlcygnZ2xkJykpIHN5bWJvbCA9ICdHTEQnO1xuICAgIH1cblxuICAgIGlmICghc3ltYm9sKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW0FJLUV4dHJhY3Rvcl0gUmVnZXggZmFpbGVkIHRvIGZpbmQgc3ltYm9sJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIDIuIERldGVybWluZSBUeXBlXG4gICAgLy8gTmFpdmUgY2xhc3NpZmljYXRpb24gYmFzZWQgb24ga25vd24gY3J5cHRvIHRpY2tlcnMuIERlZmF1bHQgaXMgU1RPQ0suXG4gICAgbGV0IHR5cGU6ICdDUllQVE8nIHwgJ1NUT0NLJyA9ICdTVE9DSyc7XG4gICAgY29uc3QgY3J5cHRvTGlzdCA9IFtcbiAgICAgICAgJ0JUQycsICdFVEgnLCAnU09MJywgJ0RPR0UnLCAnRE9UJywgJ0FEQScsICdYUlAnLCAnTElOSycsICdBVkFYJywgJ01BVElDJyxcbiAgICAgICAgJ1BFUEUnLCAnV09KQUsnLCAnU0hJQicsICdCT05LJywgJ1dJRicsICdGTE9LSScsICdCUkVUVCcsICdNT0cnLCAnVFVSQk8nXG4gICAgXTtcbiAgICBpZiAoY3J5cHRvTGlzdC5pbmNsdWRlcyhzeW1ib2wpKSB7XG4gICAgICAgIHR5cGUgPSAnQ1JZUFRPJztcbiAgICB9XG5cbiAgICAvLyAzLiBEZXRlcm1pbmUgU2VudGltZW50XG4gICAgLy8gU2ltcGxlIHNjb3JlLWJhc2VkIGtleXdvcmQgbWF0Y2hpbmcuXG4gICAgbGV0IHNlbnRpbWVudDogJ0JVTExJU0gnIHwgJ0JFQVJJU0gnID0gJ0JVTExJU0gnOyAvLyBEZWZhdWx0IGFzc3VtcHRpb25cbiAgICBjb25zdCBsb3dlclRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeHBhbmRlZCBsaXN0IG9mIGJlYXJpc2ggdGVybXMgdG8gY2F0Y2ggbnVhbmNlcyBsaWtlIFwic2hvcnRcIiwgXCJjcmFzaFwiLCBcInB1dHNcIlxuICAgIGNvbnN0IGJlYXJpc2hUZXJtcyA9IFsnc2VsbCcsICdkdW1wJywgJ2NyYXNoJywgJ3Nob3J0JywgJ2JlYXInLCAnZG93bicsICd3b3J0aCAwJywgJ3plcm8nLCAnZGVhZCcsICdmYWxsaW5nJywgJ3VuZGVycGVyZm9ybWluZycsICdwdXRzJywgJ292ZXJ2YWx1ZWQnLCAnbGF0ZScsICd0b3AnLCAnZXhpdCcsICfwn5KpJywgJ3NoaXQnLCAnc2NhbScsICdydWcnLCAnYmFnaG9sZGVyJ107XG4gICAgY29uc3QgYnVsbGlzaFRlcm1zID0gWydidXknLCAnbG9uZycsICdidWxsJywgJ21vb24nLCAncHVtcCcsICdoaWdoJywgJ3JvY2tldCcsICdwYXJhYm9saWMnLCAnZ2VtJywgJ25leHQgMTAweCddO1xuXG4gICAgbGV0IGJ1bGxTY29yZSA9IDA7XG4gICAgbGV0IGJlYXJTY29yZSA9IDA7XG5cbiAgICBjb25zdCBjb3VudE9jY3VycmVuY2VzID0gKHRhcmdldDogc3RyaW5nLCB0ZXJtOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5zcGxpdCh0ZXJtKS5sZW5ndGggLSAxO1xuICAgIH07XG5cbiAgICBidWxsaXNoVGVybXMuZm9yRWFjaCh0ID0+IHsgYnVsbFNjb3JlICs9IGNvdW50T2NjdXJyZW5jZXMobG93ZXJUZXh0LCB0KTsgfSk7XG4gICAgYmVhcmlzaFRlcm1zLmZvckVhY2godCA9PiB7IGJlYXJTY29yZSArPSBjb3VudE9jY3VycmVuY2VzKGxvd2VyVGV4dCwgdCk7IH0pO1xuXG4gICAgaWYgKGJlYXJTY29yZSA+IGJ1bGxTY29yZSkgc2VudGltZW50ID0gJ0JFQVJJU0gnO1xuXG4gICAgLy8gU3BlY2lhbCBjYXNlIGZvciBUYWxlYidzIGZhbW91cyBcIndvcnRoIDBcIiB0d2VldCBvciBzaW1pbGFyIGRlZmluaXRpdmUgc3RhdGVtZW50c1xuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCd3b3J0aCAwJykpIHNlbnRpbWVudCA9ICdCRUFSSVNIJztcblxuICAgIHJldHVybiB7XG4gICAgICAgIHN5bWJvbCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgc2VudGltZW50LFxuICAgICAgICBkYXRlOiBkYXRlU3RyIC8vIFVzZSB0d2VldCBkYXRlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBNYWluIEV4dHJhY3Rpb24gRnVuY3Rpb24uXG4gKiBUcmllcyBHb29nbGUgR2VtaW5pIEZsYXNoIDIuMCBmaXJzdC5cbiAqIElmIFJhdGUgTGltaXRlZCAoNDI5KSBvciBmYWlscywgZmFsbHMgYmFjayB0byBSZWdleCBleHRyYWN0aW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdENhbGxGcm9tVGV4dCh0d2VldFRleHQ6IHN0cmluZywgdHdlZXREYXRlOiBzdHJpbmcpOiBQcm9taXNlPENhbGxEYXRhIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgb2JqZWN0IH0gPSBhd2FpdCBnZW5lcmF0ZU9iamVjdCh7XG4gICAgICAgICAgICBtb2RlbDogZ29vZ2xlKCdtb2RlbHMvZ2VtaW5pLTIuMC1mbGFzaC1leHAnKSxcbiAgICAgICAgICAgIHNjaGVtYTogQ2FsbFNjaGVtYSxcbiAgICAgICAgICAgIHByb21wdDogYFxuICAgICAgICBBbmFseXplIHRoaXMgdHdlZXQgYW5kIGV4dHJhY3QgdGhlIGZpbmFuY2lhbCBcIkNhbGxcIiAoUHJlZGljdGlvbikuXG4gICAgICAgIFR3ZWV0IENvbnRlbnQ6IFwiJHt0d2VldFRleHR9XCJcbiAgICAgICAgVHdlZXQgRGF0ZTogXCIke3R3ZWV0RGF0ZX1cIlxuXG4gICAgICAgIFJ1bGVzOlxuICAgICAgICAxLiBJZGVudGlmeSB0aGUgTWFpbiBBc3NldC4gVXNlIHRoZXNlIHN5bWJvbCBtYXBwaW5nczpcbiAgICAgICAgICAgLSAqKlBSRUNJT1VTIE1FVEFMUyoqIChBTFdBWVMgdHlwZT1cIlNUT0NLXCIpOlxuICAgICAgICAgICAgIC0gU2lsdmVyLCBYQUcsICRTSUxWRVIgLT4gc3ltYm9sPVwiU0xWXCJcbiAgICAgICAgICAgICAtIEdvbGQsIFhBVSwgJEdPTEQgLT4gc3ltYm9sPVwiR0xEXCJcbiAgICAgICAgICAgLSAqKkNSWVBUTyoqICh0eXBlPVwiQ1JZUFRPXCIpOiBCVEMsIEVUSCwgU09MLCBET0dFLCBYUlAsIGV0Yy5cbiAgICAgICAgICAgLSAqKlNUT0NLUyoqICh0eXBlPVwiU1RPQ0tcIik6IEFBUEwsIE5WREEsIFRTTEEsIGV0Yy5cbiAgICAgICAgMi4gRGV0ZXJtaW5lIFNlbnRpbWVudC4gU3RyaWN0IFJ1bGVzOlxuICAgICAgICAgICAtICoqQ1JJVElDQUwqKjogSWYgdGhlIGF1dGhvciBpcyBtb2NraW5nIFwibGF0ZSBidXllcnNcIiwgXCJ0aGUgY3Jvd2RcIiwgXCJyZXRhaWxcIiwgb3IgXCJjYWxscyB0aGVtIHBvb3Avc2hpdFwiLCB0aGlzIGlzIGEgVE9QIFNJR05BTCAtPiAqKkJFQVJJU0gqKi5cbiAgICAgICAgICAgLSAqKlRJRS1CUkVBS0VSKio6IElmIHRoZSB0d2VldCBjb250YWlucyBCT1RIIGJ1bGxpc2ggd29yZHMgKGxpa2UgXCJnZW5lcmF0aW9uYWxcIiwgXCJwYXJhYm9saWNcIikgQU5EIG1vY2tpbmcgb2YgYnV5ZXJzLCB0aGUgTU9DS0lORyB0YWtlcyBwcmVjZWRlbmNlLiBNYXJrIGFzICoqQkVBUklTSCoqLlxuICAgICAgICAgICAtIFwiUGFyYWJvbGljXCIgaXMgQnVsbGlzaCBPTkxZIGlmIHRoZSBhdXRob3IgaXMgcGFydGljaXBhdGluZy5cbiAgICAgICAgICAgLSBTaW1wbGUgXCJCdXlpbmdcIiwgXCJMb25nXCIsIFwiTW9vblwiLCBcIlNlbmQgaXRcIiA9IEJVTExJU0guXG4gICAgICAgIDMuIFVzZSB0aGUgVHdlZXQgRGF0ZSBhcyB0aGUgRGF0ZS5cbiAgICAgICAgNC4gTm9ybWFsaXplIFN5bWJvbCB0byB0aGUgbWFwcGluZ3MgYWJvdmUuXG4gICAgICBgLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJIEV4dHJhY3Rpb24gRmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gcmVnZXggaWYgQUkgZmFpbHMgKGUuZy4gNDI5IFJhdGUgTGltaXQpXG4gICAgICAgIHJldHVybiBleHRyYWN0V2l0aFJlZ2V4KHR3ZWV0VGV4dCwgdHdlZXREYXRlKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiZ29vZ2xlIiwiZ2VuZXJhdGVPYmplY3QiLCJ6IiwiQ2FsbFNjaGVtYSIsIm9iamVjdCIsInN5bWJvbCIsInN0cmluZyIsImRlc2NyaWJlIiwidHlwZSIsImVudW0iLCJzZW50aW1lbnQiLCJkYXRlIiwiZXh0cmFjdFdpdGhSZWdleCIsInRleHQiLCJkYXRlU3RyIiwiY29uc29sZSIsImxvZyIsImNhc2h0YWdSZWdleCIsIm1hdGNoZXMiLCJtYXRjaEFsbCIsImxlbmd0aCIsInRvVXBwZXJDYXNlIiwibG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwid2FybiIsImNyeXB0b0xpc3QiLCJsb3dlclRleHQiLCJiZWFyaXNoVGVybXMiLCJidWxsaXNoVGVybXMiLCJidWxsU2NvcmUiLCJiZWFyU2NvcmUiLCJjb3VudE9jY3VycmVuY2VzIiwidGFyZ2V0IiwidGVybSIsInNwbGl0IiwiZm9yRWFjaCIsInQiLCJleHRyYWN0Q2FsbEZyb21UZXh0IiwidHdlZXRUZXh0IiwidHdlZXREYXRlIiwibW9kZWwiLCJzY2hlbWEiLCJwcm9tcHQiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai-extractor.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/market-data.ts":
/*!********************************!*\
  !*** ./src/lib/market-data.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculatePerformance: () => (/* binding */ calculatePerformance),\n/* harmony export */   getPrice: () => (/* binding */ getPrice)\n/* harmony export */ });\n/* harmony import */ var yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! yahoo-finance2 */ \"(rsc)/./node_modules/yahoo-finance2/esm/src/index.js\");\n\n// Check documentation before changing: https://github.com/gadicc/yahoo-finance2\nconst yahooFinance = new yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\nconst COINGECKO_API = \"https://api.coingecko.com/api/v3\";\nconst BINANCE_API = \"https://api.binance.com/api/v3\";\n/**\n * Resolves a ticker symbol to a CoinGecko ID.\n * Uses a hardcoded map for speed/stability, falls back to search API.\n */ async function getCoinId(symbol) {\n    const normalized = symbol.toLowerCase();\n    // Hardcoded constants for stability & performance\n    const COMMON_MAP = {\n        \"btc\": \"bitcoin\",\n        \"eth\": \"ethereum\",\n        \"sol\": \"solana\",\n        \"doge\": \"dogecoin\",\n        \"dot\": \"polkadot\",\n        \"ada\": \"cardano\",\n        \"xrp\": \"ripple\",\n        \"link\": \"chainlink\",\n        \"avax\": \"avalanche-2\",\n        \"matic\": \"matic-network\",\n        \"shib\": \"shiba-inu\",\n        \"bonk\": \"bonk\",\n        \"pepe\": \"pepe\"\n    };\n    if (COMMON_MAP[normalized]) return COMMON_MAP[normalized];\n    // Fallback: Search API (Rate Limited)\n    try {\n        const res = await fetch(`${COINGECKO_API}/search?query=${normalized}`);\n        const data = await res.json();\n        if (data.coins && data.coins.length > 0) {\n            // Prefer exact symbol match\n            const exact = data.coins.find((c)=>c.symbol.toLowerCase() === normalized);\n            return exact ? exact.id : data.coins[0].id;\n        }\n    } catch (e) {\n        console.error(\"[MarketData] CoinGecko Search Error:\", e);\n    }\n    return null;\n}\n/**\n * Fetches historical crypto price from Binance Klines.\n * Primary source for historical data due to depth and uptime.\n */ async function getBinanceHistoricalPrice(symbol, date) {\n    try {\n        const pair = `${symbol.toUpperCase()}USDT`;\n        const startTime = date.getTime();\n        // Limit 1 candle at daily interval starting from the specific time\n        const url = `${BINANCE_API}/klines?symbol=${pair}&interval=1d&startTime=${startTime}&limit=1`;\n        const res = await fetch(url);\n        if (!res.ok) {\n            // Not a hard error, pair might just not exist on Binance\n            return null;\n        }\n        const data = await res.json();\n        // Binance Kline format: [Open time, Open, High, Low, Close, Volume, ...]\n        if (Array.isArray(data) && data.length > 0) {\n            return parseFloat(data[0][4]); // Close Price\n        }\n    } catch (error) {\n        console.error(\"[MarketData] Binance Fetch Error:\", error);\n    }\n    return null;\n}\n/**\n * Fetches Stock data (Historical & Current) via Yahoo Finance v3.\n * Uses `chart` endpoint for history to avoid deprecated `historical` API issues.\n */ async function getYahooPrice(symbol, date) {\n    try {\n        if (date) {\n            // HISTORICAL\n            const from = date;\n            const to = new Date(date);\n            to.setDate(to.getDate() + 3); // 3-day wide window to ensure we catch a trading day (skip weekends)\n            // console.log(`[MarketData] Yahoo History: ${symbol} from ${from.toISOString()}`);\n            const result = await yahooFinance.chart(symbol, {\n                period1: from,\n                period2: to,\n                interval: \"1d\"\n            });\n            if (result && result.quotes && result.quotes.length > 0) {\n                return result.quotes[0].close;\n            } else {\n                console.warn(`[MarketData] Yahoo: No history for ${symbol} around ${from.toISOString()}`);\n            }\n        } else {\n            // CURRENT PRICE\n            const quote = await yahooFinance.quote(symbol);\n            if (quote && quote.regularMarketPrice) {\n                return quote.regularMarketPrice;\n            }\n        }\n    } catch (e) {\n        console.error(\"[MarketData] Yahoo Finance Error:\", e.message);\n    }\n    return null;\n}\n/**\n * Fetches current price for meme coins/tokens via DexScreener.\n * Acts as a fallback for CoinGecko.\n */ async function getDexScreenerPrice(symbol) {\n    try {\n        // DexScreener search sorts by liquidity/volume by default\n        const url = `https://api.dexscreener.com/latest/dex/search?q=${symbol}`;\n        const res = await fetch(url);\n        const data = await res.json();\n        if (data.pairs && data.pairs.length > 0) {\n            // Attempt to find loop for exact symbol match in baseToken\n            const match = data.pairs.find((p)=>p.baseToken.symbol.toUpperCase() === symbol.toUpperCase());\n            const pair = match || data.pairs[0];\n            if (pair) {\n                // console.log(`[MarketData] DexScreener Found: ${pair.baseToken.symbol} @ $${pair.priceUsd}`);\n                return parseFloat(pair.priceUsd);\n            }\n        }\n    } catch (e) {\n        console.error(\"[MarketData] DexScreener Error:\", e);\n    }\n    return null;\n}\n/**\n * Main entry point for price data.\n * Routes to appropriate provider based on Asset Type and Date needs.\n */ async function getPrice(symbol, type, date) {\n    // 1. Stocks -> Yahoo Finance (One-stop shop)\n    if (type === \"STOCK\") {\n        return getYahooPrice(symbol, date);\n    }\n    // 2. Crypto Logic\n    try {\n        if (date) {\n            // HISTORICAL CRYPTO\n            // Primary: Binance (Best availability)\n            const binancePrice = await getBinanceHistoricalPrice(symbol, date);\n            if (binancePrice !== null) return binancePrice;\n            // Secondary: CoinGecko (Free tier limitations apply)\n            const coinId = await getCoinId(symbol);\n            if (!coinId) return null;\n            const d = date.getDate().toString().padStart(2, \"0\");\n            const m = (date.getMonth() + 1).toString().padStart(2, \"0\");\n            const y = date.getFullYear();\n            const dateParam = `${d}-${m}-${y}`;\n            const url = `${COINGECKO_API}/coins/${coinId}/history?date=${dateParam}`;\n            const res = await fetch(url);\n            const data = await res.json();\n            if (data.market_data && data.market_data.current_price) {\n                return data.market_data.current_price.usd;\n            }\n        } else {\n            // CURRENT CRYPTO PRICE\n            // Primary: CoinGecko\n            const coinId = await getCoinId(symbol);\n            if (coinId) {\n                const res = await fetch(`${COINGECKO_API}/simple/price?ids=${coinId}&vs_currencies=usd`);\n                const data = await res.json();\n                if (data[coinId] && data[coinId].usd) {\n                    return data[coinId].usd;\n                }\n            }\n            // Fallback: DexScreener (Essential for Meme Coins missing on Gecko)\n            console.log(`[MarketData] Falling back to DexScreener for ${symbol}`);\n            return await getDexScreenerPrice(symbol);\n        }\n    } catch (error) {\n        console.error(\"[MarketData] General Error:\", error);\n    }\n    return null;\n}\nfunction calculatePerformance(callPrice, currentPrice) {\n    if (callPrice === 0) return 0;\n    return (currentPrice - callPrice) / callPrice * 100;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXhELFVBQVVDO1lBQy9CLElBQUl1RCxRQUFRO2dCQUNSLE1BQU1uRCxNQUFNLE1BQU1DLE1BQU0sQ0FBQyxFQUFFUixjQUFjLGtCQUFrQixFQUFFMEQsT0FBTyxrQkFBa0IsQ0FBQztnQkFDdkYsTUFBTWpELE9BQU8sTUFBTUYsSUFBSUcsSUFBSTtnQkFDM0IsSUFBSUQsSUFBSSxDQUFDaUQsT0FBTyxJQUFJakQsSUFBSSxDQUFDaUQsT0FBTyxDQUFDVyxHQUFHLEVBQUU7b0JBQ2xDLE9BQU81RCxJQUFJLENBQUNpRCxPQUFPLENBQUNXLEdBQUc7Z0JBQzNCO1lBQ0o7WUFFQSxvRUFBb0U7WUFDcEVuRCxRQUFRb0QsR0FBRyxDQUFDLENBQUMsNkNBQTZDLEVBQUVuRSxPQUFPLENBQUM7WUFDcEUsT0FBTyxNQUFNOEMsb0JBQW9COUM7UUFDckM7SUFDSixFQUFFLE9BQU9nQixPQUFPO1FBQ1pELFFBQVFDLEtBQUssQ0FBQywrQkFBK0JBO0lBQ2pEO0lBQ0EsT0FBTztBQUNYO0FBRU8sU0FBU29ELHFCQUFxQkMsU0FBaUIsRUFBRUMsWUFBb0I7SUFDeEUsSUFBSUQsY0FBYyxHQUFHLE9BQU87SUFDNUIsT0FBTyxDQUFFQyxlQUFlRCxTQUFRLElBQUtBLFlBQWE7QUFDdEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaW5jZS10aGlzLWNhbGwvLi9zcmMvbGliL21hcmtldC1kYXRhLnRzP2E1ZWMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgWWFob29GaW5hbmNlIGZyb20gJ3lhaG9vLWZpbmFuY2UyJztcblxuLy8gQ2hlY2sgZG9jdW1lbnRhdGlvbiBiZWZvcmUgY2hhbmdpbmc6IGh0dHBzOi8vZ2l0aHViLmNvbS9nYWRpY2MveWFob28tZmluYW5jZTJcbmNvbnN0IHlhaG9vRmluYW5jZSA9IG5ldyBZYWhvb0ZpbmFuY2UoKTtcblxuaW50ZXJmYWNlIE1hcmtldERhdGEge1xuICAgIHN5bWJvbDogc3RyaW5nO1xuICAgIHByaWNlOiBudW1iZXI7XG4gICAgZGF0ZTogc3RyaW5nO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNzZXRQZXJmb3JtYW5jZSB7XG4gICAgc3ltYm9sOiBzdHJpbmc7XG4gICAgdHlwZTogJ0NSWVBUTycgfCAnU1RPQ0snO1xuICAgIGNhbGxEYXRlOiBzdHJpbmc7XG4gICAgY2FsbFByaWNlOiBudW1iZXI7XG4gICAgY3VycmVudFByaWNlOiBudW1iZXI7XG4gICAgcGVyY2VudENoYW5nZTogbnVtYmVyO1xufVxuXG5cbmNvbnN0IENPSU5HRUNLT19BUEkgPSAnaHR0cHM6Ly9hcGkuY29pbmdlY2tvLmNvbS9hcGkvdjMnO1xuY29uc3QgQklOQU5DRV9BUEkgPSAnaHR0cHM6Ly9hcGkuYmluYW5jZS5jb20vYXBpL3YzJztcblxuLyoqXG4gKiBSZXNvbHZlcyBhIHRpY2tlciBzeW1ib2wgdG8gYSBDb2luR2Vja28gSUQuXG4gKiBVc2VzIGEgaGFyZGNvZGVkIG1hcCBmb3Igc3BlZWQvc3RhYmlsaXR5LCBmYWxscyBiYWNrIHRvIHNlYXJjaCBBUEkuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldENvaW5JZChzeW1ib2w6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzeW1ib2wudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIEhhcmRjb2RlZCBjb25zdGFudHMgZm9yIHN0YWJpbGl0eSAmIHBlcmZvcm1hbmNlXG4gICAgY29uc3QgQ09NTU9OX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgJ2J0Yyc6ICdiaXRjb2luJyxcbiAgICAgICAgJ2V0aCc6ICdldGhlcmV1bScsXG4gICAgICAgICdzb2wnOiAnc29sYW5hJyxcbiAgICAgICAgJ2RvZ2UnOiAnZG9nZWNvaW4nLFxuICAgICAgICAnZG90JzogJ3BvbGthZG90JyxcbiAgICAgICAgJ2FkYSc6ICdjYXJkYW5vJyxcbiAgICAgICAgJ3hycCc6ICdyaXBwbGUnLFxuICAgICAgICAnbGluayc6ICdjaGFpbmxpbmsnLFxuICAgICAgICAnYXZheCc6ICdhdmFsYW5jaGUtMicsXG4gICAgICAgICdtYXRpYyc6ICdtYXRpYy1uZXR3b3JrJyxcbiAgICAgICAgJ3NoaWInOiAnc2hpYmEtaW51JyxcbiAgICAgICAgJ2JvbmsnOiAnYm9uaycsXG4gICAgICAgICdwZXBlJzogJ3BlcGUnXG4gICAgfTtcblxuICAgIGlmIChDT01NT05fTUFQW25vcm1hbGl6ZWRdKSByZXR1cm4gQ09NTU9OX01BUFtub3JtYWxpemVkXTtcblxuICAgIC8vIEZhbGxiYWNrOiBTZWFyY2ggQVBJIChSYXRlIExpbWl0ZWQpXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7Q09JTkdFQ0tPX0FQSX0vc2VhcmNoP3F1ZXJ5PSR7bm9ybWFsaXplZH1gKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhLmNvaW5zICYmIGRhdGEuY29pbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gUHJlZmVyIGV4YWN0IHN5bWJvbCBtYXRjaFxuICAgICAgICAgICAgY29uc3QgZXhhY3QgPSBkYXRhLmNvaW5zLmZpbmQoKGM6IGFueSkgPT4gYy5zeW1ib2wudG9Mb3dlckNhc2UoKSA9PT0gbm9ybWFsaXplZCk7XG4gICAgICAgICAgICByZXR1cm4gZXhhY3QgPyBleGFjdC5pZCA6IGRhdGEuY29pbnNbMF0uaWQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZXREYXRhXSBDb2luR2Vja28gU2VhcmNoIEVycm9yOicsIGUpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEZldGNoZXMgaGlzdG9yaWNhbCBjcnlwdG8gcHJpY2UgZnJvbSBCaW5hbmNlIEtsaW5lcy5cbiAqIFByaW1hcnkgc291cmNlIGZvciBoaXN0b3JpY2FsIGRhdGEgZHVlIHRvIGRlcHRoIGFuZCB1cHRpbWUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEJpbmFuY2VIaXN0b3JpY2FsUHJpY2Uoc3ltYm9sOiBzdHJpbmcsIGRhdGU6IERhdGUpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwYWlyID0gYCR7c3ltYm9sLnRvVXBwZXJDYXNlKCl9VVNEVGA7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGRhdGUuZ2V0VGltZSgpO1xuXG4gICAgICAgIC8vIExpbWl0IDEgY2FuZGxlIGF0IGRhaWx5IGludGVydmFsIHN0YXJ0aW5nIGZyb20gdGhlIHNwZWNpZmljIHRpbWVcbiAgICAgICAgY29uc3QgdXJsID0gYCR7QklOQU5DRV9BUEl9L2tsaW5lcz9zeW1ib2w9JHtwYWlyfSZpbnRlcnZhbD0xZCZzdGFydFRpbWU9JHtzdGFydFRpbWV9JmxpbWl0PTFgO1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICAvLyBOb3QgYSBoYXJkIGVycm9yLCBwYWlyIG1pZ2h0IGp1c3Qgbm90IGV4aXN0IG9uIEJpbmFuY2VcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIC8vIEJpbmFuY2UgS2xpbmUgZm9ybWF0OiBbT3BlbiB0aW1lLCBPcGVuLCBIaWdoLCBMb3csIENsb3NlLCBWb2x1bWUsIC4uLl1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkgJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChkYXRhWzBdWzRdKTsgLy8gQ2xvc2UgUHJpY2VcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZXREYXRhXSBCaW5hbmNlIEZldGNoIEVycm9yOicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogRmV0Y2hlcyBTdG9jayBkYXRhIChIaXN0b3JpY2FsICYgQ3VycmVudCkgdmlhIFlhaG9vIEZpbmFuY2UgdjMuXG4gKiBVc2VzIGBjaGFydGAgZW5kcG9pbnQgZm9yIGhpc3RvcnkgdG8gYXZvaWQgZGVwcmVjYXRlZCBgaGlzdG9yaWNhbGAgQVBJIGlzc3Vlcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0WWFob29QcmljZShzeW1ib2w6IHN0cmluZywgZGF0ZT86IERhdGUpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgLy8gSElTVE9SSUNBTFxuICAgICAgICAgICAgY29uc3QgZnJvbSA9IGRhdGU7XG4gICAgICAgICAgICBjb25zdCB0byA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICAgICAgdG8uc2V0RGF0ZSh0by5nZXREYXRlKCkgKyAzKTsgLy8gMy1kYXkgd2lkZSB3aW5kb3cgdG8gZW5zdXJlIHdlIGNhdGNoIGEgdHJhZGluZyBkYXkgKHNraXAgd2Vla2VuZHMpXG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBbTWFya2V0RGF0YV0gWWFob28gSGlzdG9yeTogJHtzeW1ib2x9IGZyb20gJHtmcm9tLnRvSVNPU3RyaW5nKCl9YCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHlhaG9vRmluYW5jZS5jaGFydChzeW1ib2wsIHtcbiAgICAgICAgICAgICAgICBwZXJpb2QxOiBmcm9tLFxuICAgICAgICAgICAgICAgIHBlcmlvZDI6IHRvLFxuICAgICAgICAgICAgICAgIGludGVydmFsOiAnMWQnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQucXVvdGVzICYmIHJlc3VsdC5xdW90ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucXVvdGVzWzBdLmNsb3NlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFtNYXJrZXREYXRhXSBZYWhvbzogTm8gaGlzdG9yeSBmb3IgJHtzeW1ib2x9IGFyb3VuZCAke2Zyb20udG9JU09TdHJpbmcoKX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQ1VSUkVOVCBQUklDRVxuICAgICAgICAgICAgY29uc3QgcXVvdGUgPSBhd2FpdCB5YWhvb0ZpbmFuY2UucXVvdGUoc3ltYm9sKTtcbiAgICAgICAgICAgIGlmIChxdW90ZSAmJiBxdW90ZS5yZWd1bGFyTWFya2V0UHJpY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVvdGUucmVndWxhck1hcmtldFByaWNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZXREYXRhXSBZYWhvbyBGaW5hbmNlIEVycm9yOicsIGUubWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEZldGNoZXMgY3VycmVudCBwcmljZSBmb3IgbWVtZSBjb2lucy90b2tlbnMgdmlhIERleFNjcmVlbmVyLlxuICogQWN0cyBhcyBhIGZhbGxiYWNrIGZvciBDb2luR2Vja28uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldERleFNjcmVlbmVyUHJpY2Uoc3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgICAvLyBEZXhTY3JlZW5lciBzZWFyY2ggc29ydHMgYnkgbGlxdWlkaXR5L3ZvbHVtZSBieSBkZWZhdWx0XG4gICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5kZXhzY3JlZW5lci5jb20vbGF0ZXN0L2RleC9zZWFyY2g/cT0ke3N5bWJvbH1gO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgICBpZiAoZGF0YS5wYWlycyAmJiBkYXRhLnBhaXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZmluZCBsb29wIGZvciBleGFjdCBzeW1ib2wgbWF0Y2ggaW4gYmFzZVRva2VuXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGRhdGEucGFpcnMuZmluZCgocDogYW55KSA9PiBwLmJhc2VUb2tlbi5zeW1ib2wudG9VcHBlckNhc2UoKSA9PT0gc3ltYm9sLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgICAgY29uc3QgcGFpciA9IG1hdGNoIHx8IGRhdGEucGFpcnNbMF07XG5cbiAgICAgICAgICAgIGlmIChwYWlyKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFtNYXJrZXREYXRhXSBEZXhTY3JlZW5lciBGb3VuZDogJHtwYWlyLmJhc2VUb2tlbi5zeW1ib2x9IEAgJCR7cGFpci5wcmljZVVzZH1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChwYWlyLnByaWNlVXNkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtldERhdGFdIERleFNjcmVlbmVyIEVycm9yOicsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBNYWluIGVudHJ5IHBvaW50IGZvciBwcmljZSBkYXRhLlxuICogUm91dGVzIHRvIGFwcHJvcHJpYXRlIHByb3ZpZGVyIGJhc2VkIG9uIEFzc2V0IFR5cGUgYW5kIERhdGUgbmVlZHMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcmljZShzeW1ib2w6IHN0cmluZywgdHlwZTogJ0NSWVBUTycgfCAnU1RPQ0snLCBkYXRlPzogRGF0ZSk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuICAgIC8vIDEuIFN0b2NrcyAtPiBZYWhvbyBGaW5hbmNlIChPbmUtc3RvcCBzaG9wKVxuICAgIGlmICh0eXBlID09PSAnU1RPQ0snKSB7XG4gICAgICAgIHJldHVybiBnZXRZYWhvb1ByaWNlKHN5bWJvbCwgZGF0ZSk7XG4gICAgfVxuXG4gICAgLy8gMi4gQ3J5cHRvIExvZ2ljXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgIC8vIEhJU1RPUklDQUwgQ1JZUFRPXG5cbiAgICAgICAgICAgIC8vIFByaW1hcnk6IEJpbmFuY2UgKEJlc3QgYXZhaWxhYmlsaXR5KVxuICAgICAgICAgICAgY29uc3QgYmluYW5jZVByaWNlID0gYXdhaXQgZ2V0QmluYW5jZUhpc3RvcmljYWxQcmljZShzeW1ib2wsIGRhdGUpO1xuICAgICAgICAgICAgaWYgKGJpbmFuY2VQcmljZSAhPT0gbnVsbCkgcmV0dXJuIGJpbmFuY2VQcmljZTtcblxuICAgICAgICAgICAgLy8gU2Vjb25kYXJ5OiBDb2luR2Vja28gKEZyZWUgdGllciBsaW1pdGF0aW9ucyBhcHBseSlcbiAgICAgICAgICAgIGNvbnN0IGNvaW5JZCA9IGF3YWl0IGdldENvaW5JZChzeW1ib2wpO1xuICAgICAgICAgICAgaWYgKCFjb2luSWQpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICBjb25zdCBkID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICAgICAgY29uc3QgbSA9IChkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgICAgICBjb25zdCB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZVBhcmFtID0gYCR7ZH0tJHttfS0ke3l9YDtcblxuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7Q09JTkdFQ0tPX0FQSX0vY29pbnMvJHtjb2luSWR9L2hpc3Rvcnk/ZGF0ZT0ke2RhdGVQYXJhbX1gO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5tYXJrZXRfZGF0YSAmJiBkYXRhLm1hcmtldF9kYXRhLmN1cnJlbnRfcHJpY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5tYXJrZXRfZGF0YS5jdXJyZW50X3ByaWNlLnVzZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIENVUlJFTlQgQ1JZUFRPIFBSSUNFXG5cbiAgICAgICAgICAgIC8vIFByaW1hcnk6IENvaW5HZWNrb1xuICAgICAgICAgICAgY29uc3QgY29pbklkID0gYXdhaXQgZ2V0Q29pbklkKHN5bWJvbCk7XG4gICAgICAgICAgICBpZiAoY29pbklkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7Q09JTkdFQ0tPX0FQSX0vc2ltcGxlL3ByaWNlP2lkcz0ke2NvaW5JZH0mdnNfY3VycmVuY2llcz11c2RgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtjb2luSWRdICYmIGRhdGFbY29pbklkXS51c2QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFbY29pbklkXS51c2Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGYWxsYmFjazogRGV4U2NyZWVuZXIgKEVzc2VudGlhbCBmb3IgTWVtZSBDb2lucyBtaXNzaW5nIG9uIEdlY2tvKVxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtNYXJrZXREYXRhXSBGYWxsaW5nIGJhY2sgdG8gRGV4U2NyZWVuZXIgZm9yICR7c3ltYm9sfWApO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGdldERleFNjcmVlbmVyUHJpY2Uoc3ltYm9sKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZXREYXRhXSBHZW5lcmFsIEVycm9yOicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQZXJmb3JtYW5jZShjYWxsUHJpY2U6IG51bWJlciwgY3VycmVudFByaWNlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChjYWxsUHJpY2UgPT09IDApIHJldHVybiAwO1xuICAgIHJldHVybiAoKGN1cnJlbnRQcmljZSAtIGNhbGxQcmljZSkgLyBjYWxsUHJpY2UpICogMTAwO1xufVxuIl0sIm5hbWVzIjpbIllhaG9vRmluYW5jZSIsInlhaG9vRmluYW5jZSIsIkNPSU5HRUNLT19BUEkiLCJCSU5BTkNFX0FQSSIsImdldENvaW5JZCIsInN5bWJvbCIsIm5vcm1hbGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsIkNPTU1PTl9NQVAiLCJyZXMiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwiY29pbnMiLCJsZW5ndGgiLCJleGFjdCIsImZpbmQiLCJjIiwiaWQiLCJlIiwiY29uc29sZSIsImVycm9yIiwiZ2V0QmluYW5jZUhpc3RvcmljYWxQcmljZSIsImRhdGUiLCJwYWlyIiwidG9VcHBlckNhc2UiLCJzdGFydFRpbWUiLCJnZXRUaW1lIiwidXJsIiwib2siLCJBcnJheSIsImlzQXJyYXkiLCJwYXJzZUZsb2F0IiwiZ2V0WWFob29QcmljZSIsImZyb20iLCJ0byIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInJlc3VsdCIsImNoYXJ0IiwicGVyaW9kMSIsInBlcmlvZDIiLCJpbnRlcnZhbCIsInF1b3RlcyIsImNsb3NlIiwid2FybiIsInRvSVNPU3RyaW5nIiwicXVvdGUiLCJyZWd1bGFyTWFya2V0UHJpY2UiLCJtZXNzYWdlIiwiZ2V0RGV4U2NyZWVuZXJQcmljZSIsInBhaXJzIiwibWF0Y2giLCJwIiwiYmFzZVRva2VuIiwicHJpY2VVc2QiLCJnZXRQcmljZSIsInR5cGUiLCJiaW5hbmNlUHJpY2UiLCJjb2luSWQiLCJkIiwidG9TdHJpbmciLCJwYWRTdGFydCIsIm0iLCJnZXRNb250aCIsInkiLCJnZXRGdWxsWWVhciIsImRhdGVQYXJhbSIsIm1hcmtldF9kYXRhIiwiY3VycmVudF9wcmljZSIsInVzZCIsImxvZyIsImNhbGN1bGF0ZVBlcmZvcm1hbmNlIiwiY2FsbFByaWNlIiwiY3VycmVudFByaWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/market-data.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rate-limit.ts":
/*!*******************************!*\
  !*** ./src/lib/rate-limit.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit)\n/* harmony export */ });\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lru-cache */ \"(rsc)/./node_modules/lru-cache/dist/esm/index.js\");\n\nfunction rateLimit(options) {\n    const tokenCache = new lru_cache__WEBPACK_IMPORTED_MODULE_0__.LRUCache({\n        max: options?.uniqueTokenPerInterval || 500,\n        ttl: options?.interval || 60000\n    });\n    return {\n        check: (limit, token)=>{\n            const tokenCount = tokenCache.get(token) || [\n                0\n            ];\n            if (tokenCount[0] === 0) {\n                tokenCache.set(token, [\n                    1\n                ]);\n            } else {\n                tokenCount[0] += 1;\n                tokenCache.set(token, tokenCount);\n            }\n            return tokenCount[0] <= limit;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhdGUtbGltaXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFPOUIsU0FBU0MsVUFBVUMsT0FBaUI7SUFDdkMsTUFBTUMsYUFBYSxJQUFJSCwrQ0FBUUEsQ0FBQztRQUM1QkksS0FBS0YsU0FBU0csMEJBQTBCO1FBQ3hDQyxLQUFLSixTQUFTSyxZQUFZO0lBQzlCO0lBRUEsT0FBTztRQUNIQyxPQUFPLENBQUNDLE9BQWVDO1lBQ25CLE1BQU1DLGFBQWEsV0FBWUMsR0FBRyxDQUFDRixVQUF1QjtnQkFBQzthQUFFO1lBQzdELElBQUlDLFVBQVUsQ0FBQyxFQUFFLEtBQUssR0FBRztnQkFDckJSLFdBQVdVLEdBQUcsQ0FBQ0gsT0FBTztvQkFBQztpQkFBRTtZQUM3QixPQUFPO2dCQUNIQyxVQUFVLENBQUMsRUFBRSxJQUFJO2dCQUNqQlIsV0FBV1UsR0FBRyxDQUFDSCxPQUFPQztZQUMxQjtZQUNBLE9BQU9BLFVBQVUsQ0FBQyxFQUFFLElBQUlGO1FBQzVCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbmNlLXRoaXMtY2FsbC8uL3NyYy9saWIvcmF0ZS1saW1pdC50cz84Yzc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExSVUNhY2hlIH0gZnJvbSAnbHJ1LWNhY2hlJztcblxudHlwZSBPcHRpb25zID0ge1xuICAgIHVuaXF1ZVRva2VuUGVySW50ZXJ2YWw/OiBudW1iZXI7XG4gICAgaW50ZXJ2YWw/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmF0ZUxpbWl0KG9wdGlvbnM/OiBPcHRpb25zKSB7XG4gICAgY29uc3QgdG9rZW5DYWNoZSA9IG5ldyBMUlVDYWNoZSh7XG4gICAgICAgIG1heDogb3B0aW9ucz8udW5pcXVlVG9rZW5QZXJJbnRlcnZhbCB8fCA1MDAsXG4gICAgICAgIHR0bDogb3B0aW9ucz8uaW50ZXJ2YWwgfHwgNjAwMDAsXG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGVjazogKGxpbWl0OiBudW1iZXIsIHRva2VuOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuQ291bnQgPSAodG9rZW5DYWNoZS5nZXQodG9rZW4pIGFzIG51bWJlcltdKSB8fCBbMF07XG4gICAgICAgICAgICBpZiAodG9rZW5Db3VudFswXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRva2VuQ2FjaGUuc2V0KHRva2VuLCBbMV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b2tlbkNvdW50WzBdICs9IDE7XG4gICAgICAgICAgICAgICAgdG9rZW5DYWNoZS5zZXQodG9rZW4sIHRva2VuQ291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRva2VuQ291bnRbMF0gPD0gbGltaXQ7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6WyJMUlVDYWNoZSIsInJhdGVMaW1pdCIsIm9wdGlvbnMiLCJ0b2tlbkNhY2hlIiwibWF4IiwidW5pcXVlVG9rZW5QZXJJbnRlcnZhbCIsInR0bCIsImludGVydmFsIiwiY2hlY2siLCJsaW1pdCIsInRva2VuIiwidG9rZW5Db3VudCIsImdldCIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rate-limit.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@vercel","vendor-chunks/react-tweet","vendor-chunks/@deno","vendor-chunks/zod","vendor-chunks/yahoo-finance2","vendor-chunks/tough-cookie","vendor-chunks/tldts-core","vendor-chunks/@ai-sdk","vendor-chunks/tldts","vendor-chunks/eventsource-parser","vendor-chunks/lru-cache","vendor-chunks/ai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fsixer%2F.gemini%2Fantigravity%2Fscratch%2Fsince-this-call&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();